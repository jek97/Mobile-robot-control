
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>wall_follow_service &#8212; Mobile robot control 0.1 documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinx_highlight.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <h1>Source code for wall_follow_service</h1><div class="highlight"><pre>
<span></span><span class="ch">#! /usr/bin/env python3</span>

<span class="kn">import</span> <span class="nn">rospy</span>
<span class="kn">from</span> <span class="nn">sensor_msgs.msg</span> <span class="kn">import</span> <span class="n">LaserScan</span>
<span class="kn">from</span> <span class="nn">geometry_msgs.msg</span> <span class="kn">import</span> <span class="n">Twist</span>
<span class="kn">from</span> <span class="nn">nav_msgs.msg</span> <span class="kn">import</span> <span class="n">Odometry</span>
<span class="kn">from</span> <span class="nn">std_srvs.srv</span> <span class="kn">import</span> <span class="o">*</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">..module:: wall_follower_service</span>
<span class="sd">  :platform: Unix</span>
<span class="sd">  :synopsis: Python module for the robot bug0 control, wall following part</span>
<span class="sd">  :version: 0.1</span>

<span class="sd">..moduleauthor:: Giacomo Lugano jek.lugano@yahoo.com</span>

<span class="sd">This node implement the behavior of, one an obstacle is encountered along the path, following the wall perimeter, maintaining the wall on the robot right side at a given distance.</span>

<span class="sd">Subscriber:</span>
<span class="sd">   /scan</span>

<span class="sd">Publisher:</span>
<span class="sd">   /cmd_vel</span>

<span class="sd">Service:</span>
<span class="sd">   /wall_follower_switch (server)</span>

<span class="sd">&quot;&quot;&quot;</span>

<span class="n">active_</span> <span class="o">=</span> <span class="kc">False</span>

<span class="n">pub_</span> <span class="o">=</span> <span class="kc">None</span>
<span class="n">regions_</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;right&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s1">&#39;fright&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s1">&#39;front&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s1">&#39;fleft&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s1">&#39;left&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
<span class="p">}</span>
<span class="n">state_</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">state_dict_</span> <span class="o">=</span> <span class="p">{</span>
    <span class="mi">0</span><span class="p">:</span> <span class="s1">&#39;find the wall&#39;</span><span class="p">,</span>
    <span class="mi">1</span><span class="p">:</span> <span class="s1">&#39;turn left&#39;</span><span class="p">,</span>
    <span class="mi">2</span><span class="p">:</span> <span class="s1">&#39;follow the wall&#39;</span><span class="p">,</span>
<span class="p">}</span>


<div class="viewcode-block" id="wall_follower_switch"><a class="viewcode-back" href="../index.html#wall_follow_service.wall_follower_switch">[docs]</a><span class="k">def</span> <span class="nf">wall_follower_switch</span><span class="p">(</span><span class="n">req</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Args: SetBool(req): service request message </span>

<span class="sd">    This method will return the success responce to the service client.</span>

<span class="sd">    Return: SetBoolResponse(res): service responce message</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">active_</span>
    <span class="n">active_</span> <span class="o">=</span> <span class="n">req</span><span class="o">.</span><span class="n">data</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">SetBoolResponse</span><span class="p">()</span>
    <span class="n">res</span><span class="o">.</span><span class="n">success</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">res</span><span class="o">.</span><span class="n">message</span> <span class="o">=</span> <span class="s1">&#39;Done!&#39;</span>
    <span class="k">return</span> <span class="n">res</span></div>


<div class="viewcode-block" id="clbk_laser"><a class="viewcode-back" href="../index.html#wall_follow_service.clbk_laser">[docs]</a><span class="k">def</span> <span class="nf">clbk_laser</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Args: LaserScan(msg): Lidar data</span>

<span class="sd">    This method will check for the closer wall in the 5 circular sector in front of the robot and call the method &#39;take_action()&#39;</span>
<span class="sd">    </span>
<span class="sd">    Return: None</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">regions_</span>
    <span class="n">regions_</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;right&#39;</span><span class="p">:</span>  <span class="nb">min</span><span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="n">msg</span><span class="o">.</span><span class="n">ranges</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">143</span><span class="p">]),</span> <span class="mi">10</span><span class="p">),</span>
        <span class="s1">&#39;fright&#39;</span><span class="p">:</span> <span class="nb">min</span><span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="n">msg</span><span class="o">.</span><span class="n">ranges</span><span class="p">[</span><span class="mi">144</span><span class="p">:</span><span class="mi">287</span><span class="p">]),</span> <span class="mi">10</span><span class="p">),</span>
        <span class="s1">&#39;front&#39;</span><span class="p">:</span>  <span class="nb">min</span><span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="n">msg</span><span class="o">.</span><span class="n">ranges</span><span class="p">[</span><span class="mi">288</span><span class="p">:</span><span class="mi">431</span><span class="p">]),</span> <span class="mi">10</span><span class="p">),</span>
        <span class="s1">&#39;fleft&#39;</span><span class="p">:</span>  <span class="nb">min</span><span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="n">msg</span><span class="o">.</span><span class="n">ranges</span><span class="p">[</span><span class="mi">432</span><span class="p">:</span><span class="mi">575</span><span class="p">]),</span> <span class="mi">10</span><span class="p">),</span>
        <span class="s1">&#39;left&#39;</span><span class="p">:</span>   <span class="nb">min</span><span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="n">msg</span><span class="o">.</span><span class="n">ranges</span><span class="p">[</span><span class="mi">576</span><span class="p">:</span><span class="mi">713</span><span class="p">]),</span> <span class="mi">10</span><span class="p">),</span>
    <span class="p">}</span>

    <span class="n">take_action</span><span class="p">()</span></div>


<div class="viewcode-block" id="change_state"><a class="viewcode-back" href="../index.html#wall_follow_service.change_state">[docs]</a><span class="k">def</span> <span class="nf">change_state</span><span class="p">(</span><span class="n">state</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Args: int(state): desired state of the state machine</span>
<span class="sd">    </span>
<span class="sd">    this method change the state of the robot between the *go_to_point* behavior and the *wall_follower* one based on the state set by the rest of the algorithm</span>
<span class="sd">    </span>
<span class="sd">    Return: None</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">state_</span><span class="p">,</span> <span class="n">state_dict_</span>
    <span class="k">if</span> <span class="n">state</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">state_</span><span class="p">:</span>
        <span class="nb">print</span> <span class="p">(</span><span class="s1">&#39;Wall follower - [</span><span class="si">%s</span><span class="s1">] - </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">state</span><span class="p">,</span> <span class="n">state_dict_</span><span class="p">[</span><span class="n">state</span><span class="p">]))</span>
        <span class="n">state_</span> <span class="o">=</span> <span class="n">state</span></div>


<div class="viewcode-block" id="take_action"><a class="viewcode-back" href="../index.html#wall_follow_service.take_action">[docs]</a><span class="k">def</span> <span class="nf">take_action</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Args: None</span>

<span class="sd">    This method based on the position of the closest wall will change the state of the node.if there is no wall closer then the threshold in front of the robot, or there is one but on the left or on both left and right the node will move in the state 0 that, with the next iteration of the main will call the method *find_wall()*,</span>
<span class="sd">    if instead there is a wall infront of the robot, or in front and on the right, or in front and on the left or all around the robot, the node will switch to the state 1, that at the next iteration will call the method *turn_left()*, if the robot has a wall on it&#39;s right it will switch on the state 2 and on the next iteration will call the method *follow_the_wall()*. </span>
<span class="sd">    </span>
<span class="sd">    Return: None</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">regions_</span>
    <span class="n">regions</span> <span class="o">=</span> <span class="n">regions_</span>
    <span class="n">msg</span> <span class="o">=</span> <span class="n">Twist</span><span class="p">()</span>
    <span class="n">linear_x</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">angular_z</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">state_description</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>

    <span class="n">d0</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">d</span> <span class="o">=</span> <span class="mf">1.5</span>

    <span class="k">if</span> <span class="n">regions</span><span class="p">[</span><span class="s1">&#39;front&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">d0</span> <span class="ow">and</span> <span class="n">regions</span><span class="p">[</span><span class="s1">&#39;fleft&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">d</span> <span class="ow">and</span> <span class="n">regions</span><span class="p">[</span><span class="s1">&#39;fright&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">d</span><span class="p">:</span>
        <span class="n">state_description</span> <span class="o">=</span> <span class="s1">&#39;case 1 - nothing&#39;</span>
        <span class="n">change_state</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">regions</span><span class="p">[</span><span class="s1">&#39;front&#39;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">d0</span> <span class="ow">and</span> <span class="n">regions</span><span class="p">[</span><span class="s1">&#39;fleft&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">d</span> <span class="ow">and</span> <span class="n">regions</span><span class="p">[</span><span class="s1">&#39;fright&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">d</span><span class="p">:</span>
        <span class="n">state_description</span> <span class="o">=</span> <span class="s1">&#39;case 2 - front&#39;</span>
        <span class="n">change_state</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">regions</span><span class="p">[</span><span class="s1">&#39;front&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">d0</span> <span class="ow">and</span> <span class="n">regions</span><span class="p">[</span><span class="s1">&#39;fleft&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">d</span> <span class="ow">and</span> <span class="n">regions</span><span class="p">[</span><span class="s1">&#39;fright&#39;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">d</span><span class="p">:</span>
        <span class="n">state_description</span> <span class="o">=</span> <span class="s1">&#39;case 3 - fright&#39;</span>
        <span class="n">change_state</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">regions</span><span class="p">[</span><span class="s1">&#39;front&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">d0</span> <span class="ow">and</span> <span class="n">regions</span><span class="p">[</span><span class="s1">&#39;fleft&#39;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">d</span> <span class="ow">and</span> <span class="n">regions</span><span class="p">[</span><span class="s1">&#39;fright&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">d</span><span class="p">:</span>
        <span class="n">state_description</span> <span class="o">=</span> <span class="s1">&#39;case 4 - fleft&#39;</span>
        <span class="n">change_state</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">regions</span><span class="p">[</span><span class="s1">&#39;front&#39;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">d0</span> <span class="ow">and</span> <span class="n">regions</span><span class="p">[</span><span class="s1">&#39;fleft&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">d</span> <span class="ow">and</span> <span class="n">regions</span><span class="p">[</span><span class="s1">&#39;fright&#39;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">d</span><span class="p">:</span>
        <span class="n">state_description</span> <span class="o">=</span> <span class="s1">&#39;case 5 - front and fright&#39;</span>
        <span class="n">change_state</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">regions</span><span class="p">[</span><span class="s1">&#39;front&#39;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">d0</span> <span class="ow">and</span> <span class="n">regions</span><span class="p">[</span><span class="s1">&#39;fleft&#39;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">d</span> <span class="ow">and</span> <span class="n">regions</span><span class="p">[</span><span class="s1">&#39;fright&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">d</span><span class="p">:</span>
        <span class="n">state_description</span> <span class="o">=</span> <span class="s1">&#39;case 6 - front and fleft&#39;</span>
        <span class="n">change_state</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">regions</span><span class="p">[</span><span class="s1">&#39;front&#39;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">d0</span> <span class="ow">and</span> <span class="n">regions</span><span class="p">[</span><span class="s1">&#39;fleft&#39;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">d</span> <span class="ow">and</span> <span class="n">regions</span><span class="p">[</span><span class="s1">&#39;fright&#39;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">d</span><span class="p">:</span>
        <span class="n">state_description</span> <span class="o">=</span> <span class="s1">&#39;case 7 - front and fleft and fright&#39;</span>
        <span class="n">change_state</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">regions</span><span class="p">[</span><span class="s1">&#39;front&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">d0</span> <span class="ow">and</span> <span class="n">regions</span><span class="p">[</span><span class="s1">&#39;fleft&#39;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">d</span> <span class="ow">and</span> <span class="n">regions</span><span class="p">[</span><span class="s1">&#39;fright&#39;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">d</span><span class="p">:</span>
        <span class="n">state_description</span> <span class="o">=</span> <span class="s1">&#39;case 8 - fleft and fright&#39;</span>
        <span class="n">change_state</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">state_description</span> <span class="o">=</span> <span class="s1">&#39;unknown case&#39;</span>
        <span class="n">rospy</span><span class="o">.</span><span class="n">loginfo</span><span class="p">(</span><span class="n">regions</span><span class="p">)</span></div>


<div class="viewcode-block" id="find_wall"><a class="viewcode-back" href="../index.html#wall_follow_service.find_wall">[docs]</a><span class="k">def</span> <span class="nf">find_wall</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Args: None</span>

<span class="sd">    This method will set the message to publish on */cmd_vel* to move the robot along a circular trajectory till it find a wall.</span>

<span class="sd">    Return: Twist(msg): desired linear and angular speed</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">msg</span> <span class="o">=</span> <span class="n">Twist</span><span class="p">()</span>
    <span class="n">msg</span><span class="o">.</span><span class="n">linear</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="mf">0.2</span>
    <span class="n">msg</span><span class="o">.</span><span class="n">angular</span><span class="o">.</span><span class="n">z</span> <span class="o">=</span> <span class="o">-</span><span class="mf">0.3</span>
    <span class="k">return</span> <span class="n">msg</span></div>


<div class="viewcode-block" id="turn_left"><a class="viewcode-back" href="../index.html#wall_follow_service.turn_left">[docs]</a><span class="k">def</span> <span class="nf">turn_left</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Args: None</span>

<span class="sd">    This method will set the message to publish on */cmd_vel* to turn the robot on the left.</span>
<span class="sd">    </span>
<span class="sd">    Return: Twist(msg): desired linear and angular speed</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">msg</span> <span class="o">=</span> <span class="n">Twist</span><span class="p">()</span>
    <span class="n">msg</span><span class="o">.</span><span class="n">angular</span><span class="o">.</span><span class="n">z</span> <span class="o">=</span> <span class="mf">0.3</span>
    <span class="k">return</span> <span class="n">msg</span></div>


<div class="viewcode-block" id="follow_the_wall"><a class="viewcode-back" href="../index.html#wall_follow_service.follow_the_wall">[docs]</a><span class="k">def</span> <span class="nf">follow_the_wall</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Args: None</span>

<span class="sd">    This method will set the message to publish on */cmd_vel* to move straight.</span>

<span class="sd">    Return: Twist(msg): desired linear and angular speed.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">regions_</span>

    <span class="n">msg</span> <span class="o">=</span> <span class="n">Twist</span><span class="p">()</span>
    <span class="n">msg</span><span class="o">.</span><span class="n">linear</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="mf">0.5</span>
    <span class="k">return</span> <span class="n">msg</span></div>


<div class="viewcode-block" id="main"><a class="viewcode-back" href="../index.html#wall_follow_service.main">[docs]</a><span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Args: None</span>

<span class="sd">    This method after initialization will connect as a publisher to the topic */cmd_vel*, to controll the robot motion, subscribe to the topic */scan*, to get the information of the lidar and will connect to the service *wall_follower_switch* to activate or deactivate this node.</span>
<span class="sd">    </span>
<span class="sd">    Return: None</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">pub_</span><span class="p">,</span> <span class="n">active_</span>

    <span class="n">rospy</span><span class="o">.</span><span class="n">init_node</span><span class="p">(</span><span class="s1">&#39;reading_laser&#39;</span><span class="p">)</span>

    <span class="n">pub_</span> <span class="o">=</span> <span class="n">rospy</span><span class="o">.</span><span class="n">Publisher</span><span class="p">(</span><span class="s1">&#39;/cmd_vel&#39;</span><span class="p">,</span> <span class="n">Twist</span><span class="p">,</span> <span class="n">queue_size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

    <span class="n">sub</span> <span class="o">=</span> <span class="n">rospy</span><span class="o">.</span><span class="n">Subscriber</span><span class="p">(</span><span class="s1">&#39;/scan&#39;</span><span class="p">,</span> <span class="n">LaserScan</span><span class="p">,</span> <span class="n">clbk_laser</span><span class="p">)</span>

    <span class="n">srv</span> <span class="o">=</span> <span class="n">rospy</span><span class="o">.</span><span class="n">Service</span><span class="p">(</span><span class="s1">&#39;wall_follower_switch&#39;</span><span class="p">,</span> <span class="n">SetBool</span><span class="p">,</span> <span class="n">wall_follower_switch</span><span class="p">)</span>

    <span class="n">rate</span> <span class="o">=</span> <span class="n">rospy</span><span class="o">.</span><span class="n">Rate</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
    <span class="k">while</span> <span class="ow">not</span> <span class="n">rospy</span><span class="o">.</span><span class="n">is_shutdown</span><span class="p">():</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">active_</span><span class="p">:</span>
            <span class="n">rate</span><span class="o">.</span><span class="n">sleep</span><span class="p">()</span>
            <span class="k">continue</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="n">Twist</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">state_</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">msg</span> <span class="o">=</span> <span class="n">find_wall</span><span class="p">()</span>
            <span class="k">elif</span> <span class="n">state_</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">msg</span> <span class="o">=</span> <span class="n">turn_left</span><span class="p">()</span>
            <span class="k">elif</span> <span class="n">state_</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
                <span class="n">msg</span> <span class="o">=</span> <span class="n">follow_the_wall</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">rospy</span><span class="o">.</span><span class="n">logerr</span><span class="p">(</span><span class="s1">&#39;Unknown state!&#39;</span><span class="p">)</span>

            <span class="n">pub_</span><span class="o">.</span><span class="n">publish</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

        <span class="n">rate</span><span class="o">.</span><span class="n">sleep</span><span class="p">()</span></div>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</pre></div>

          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">Mobile robot control</a></h1>








<h3>Navigation</h3>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="index.html">Module code</a><ul>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2023, Lugano Giacomo.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 6.2.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.8</a>
      
    </div>

    

    
  </body>
</html>